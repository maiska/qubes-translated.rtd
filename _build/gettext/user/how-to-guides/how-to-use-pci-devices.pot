# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2022, test
# This file is distributed under the same license as the qubes-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: qubes-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2022-05-23 17:29+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:1
#: 45663c6ebccd4bf9b1296194a5323022
msgid "*This page is part of*\\ :doc:`device handling in qubes </user/how-to-guides/how-to-use-devices>`\\ *.*"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:4
#: f59cfbc4cf604eccaba82629fe61070e
msgid "**Warning:** Only dom0 exposes PCI devices. Some of them are strictly required in dom0 (e.g., the host bridge). You may end up with an unusable system by attaching the wrong PCI device to a VM. PCI passthrough should be safe by default, but non-default options may be required. Please make sure you carefully read and understand the `security considerations </user/security-in-qubes/device-handling-security.html#pci-security>`__ before deviating from default behavior."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:14
#: 020beb888c6a4951afcd93ca821707c7
msgid "Introduction"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:16
#: eecc43369f4f4c069b86eedd06d71c92
msgid "Unlike other devices (:doc:`USB </user/how-to-guides/how-to-use-usb-devices>`, :doc:`block </user/how-to-guides/how-to-use-block-storage-devices>`, mic), PCI devices need to be attached on VM-bootup. Similar to how you can’t attach a new sound-card after your computer booted (and expect it to work properly), attaching PCI devices to already booted VMs isn’t supported."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:22
#: 43d718eeb8774f05bf5fc96b0490f30b
msgid "The Qubes installer attaches all network class controllers to ``sys-net`` and all USB controllers to ``sys-usb`` by default, if you chose to create the network and USB qube during install. While this covers most use cases, there are some occasions when you may want to manually attach one NIC to ``sys-net`` and another to a custom NetVM, or have some other type of PCI controller you want to manually attach."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:29
#: a3ca7241f3ea42b8b3871cec52156c30
msgid "Some devices expose multiple functions with distinct BDF-numbers. Limits imposed by the PC and VT-d architectures may require all functions belonging to the same device to be attached to the same VM. This requirement can be dropped with the ``no-strict-reset`` option during attachment, bearing in mind the aforementioned `security considerations </user/security-in-qubes/device-handling-security.html#pci-security>`__. In the steps below, you can tell if this is needed if you see the BDF for the same device listed multiple times with only the number after the “.” changing."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:39
#: a05959bc92f245b2859ac3435b366b21
msgid "While PCI device can only be used by one powered on VM at a time, it *is* possible to *assign* the same device to more than one VM at a time. This means that you can use the device in one VM, shut that VM down, start up a different VM (to which the same device is now attached), then use the device in that VM. This can be useful if, for example, you have only one USB controller, but you have multiple security domains which all require the use of different USB devices."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:48
#: 380819a103664574889a8c2ab65277e2
msgid "Attaching Devices Using the GUI"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:50
#: bd5fff8cbf42418bb4927018ff7f83ad
msgid "The qube settings for a VM offers the “Devices”-tab. There you can attach PCI-devices to a qube."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:53
#: f8f4da36708a47b09220d37fb05774e3
msgid "To reach the settings of any qube either"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:55
#: fc1dffee1e9747f3afa776894c399c9f
msgid "Press Alt+F3 to open the application finder, type in the VM name, select the “|appmenu|\\ [VM-name]: Qube Settings” menu entry and press enter or click “Launch”!"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:58
#: 1982c0ca0b184abbbb5290d7b00f39bc
msgid "Select the VM in Qube Manager and click the settings-button or right-click the VM and select ``Qube settings``."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:60
#: 44e088534baa4e1699e68fd3b457a9a9
msgid "Click the Domain Manager, hover the VM you want to attach a device to and select “settings” in the additional menu. (only running VMs!)"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:64
#: 114c2c309e8a456b8e48e0b7507f9a57
msgid "Select the “Devices” tab on the top bar."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:66
#: bc0855eb89e547238670e64cc9cf2607
msgid "Select a device you want to attach to the qube and click the single arrow right! (``>``)"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:69
#: 61cd932279d04cdc90811112d3dcf880
msgid "You’re done. If everything worked out, once the qube boots (or reboots if it’s running) it will start with the pci device attached."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:72
#: da303554fd4e4091a84384932ab9cae2
msgid "In case it doesn’t work out, first try disabling memory-balancing in the settings (“Advanced” tab). If that doesn’t help, read on to learn how to disable the strict reset requirement!"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:77
#: 23343cca0a9c494f9f12d574d815c2c3
msgid "``qvm-pci`` Usage"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:79
#: fba840b01a724143a050d09bb87c26a6
msgid "The ``qvm-pci`` tool allows PCI attachment and detachment. It’s a shortcut for ```qvm-device pci`` </doc/how-to-use-devices/#general-qubes-device-widget-behavior-and-handling>`__."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:83
#: cabb8690fc8c4ab7abb1f0594261fe93
msgid "To figure out what device to attach, first list the available PCI devices by running (as user) in dom0:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:90
#: efee4045affe4edeab446e8034fc7ffe
msgid "This will show you the ``backend:BDF`` (Bus_Device.Function) address of each PCI device. It will look something like ``dom0:00_1a.0``. Once you’ve found the address of the device you want to attach, then attach it like this:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:99
#: 3fcb8a9ca1364a798b7274af96d4eac3
msgid "Since PCI devices have to be attached on bootup, attaching has to happen with the ``--persistant`` option."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:102
#: e77bf122939549669c5cb22f11297d1a
msgid "For example, if ``00_1a.0`` is the BDF of the device you want to attach to the “work” domain, you would do this:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:110
#: 6f28ee356e934154b75df25e80ea8205
msgid "Possible Issues"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:112
#: 2e291be186da4df28c5dc2159333d40c
msgid "Visit the :doc:`PCI Troubleshooting guide </user/troubleshooting/pci-troubleshooting>` to see issues that may arise due to PCI devices and how to troubleshoot them."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:117
#: 48dd711d2f694d5686190d31ececb4a2
msgid "Additional Attach Options"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:119
#: 58ee6271daa149d19a1f85742d80044d
msgid "Attaching a PCI device through the commandline offers additional options, specifiable via the ``--option``/``-o`` option. (Yes, confusing wording, there’s an `issue for that <https://github.com/QubesOS/qubes-issues/issues/4530>`__.)"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:124
#: 18ed0b577c004691a68650031eaa53cb
msgid "``qvm-pci`` exposes two additional options. Both are intended to fix device or driver specific issues, but both come with `heavy security implications </user/security-in-qubes/device-handling-security.html#pci-security>`__! **Make sure you understand them before continuing!**"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:130
#: 0776da6a2eae481a9672f26ce00e4d65
msgid "no-strict-reset"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:132
#: 1ce23aaf3c614838999e9e12c57ff21c
msgid "Do not require PCI device to be reset before attaching it to another VM. This may leak usage data even without malicious intent!"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:135
#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:148
#: e6ba1318aaa84c3388d94a22981544b9
#: ed77303688874d6b96748a3e3df9277b
msgid "usage example:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:142
#: 6c0d4aff835341f59e616cc11b396c1a
msgid "permissive"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:144
#: fa5187a9caad4230978c30263ee2bc56
msgid "Allow write access to full PCI config space instead of whitelisted registers. This increases attack surface and possibility of `side channel attacks <https://en.wikipedia.org/wiki/Side-channel_attack>`__."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:155
#: 8f49ca6c0cb64d73b02d070ddec80fc9
msgid "Bringing PCI Devices Back to dom0"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:157
#: b18ed14fd44a4efd88016803ed69cc6f
msgid "By default, when a device is detached from a VM (or when a VM with an attached PCI device is shut down), the device is *not* automatically attached back to dom0."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:161
#: 2562e3a97d55487f9f2280679fa5f590
msgid "This is an intended feature."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:163
#: 351bf6573ff849cc980fc1221234f0f7
msgid "A device which was previously attached to a VM less trusted than dom0 (which, in Qubes, is *all* of them) could attack dom0 if it were automatically reattached there."
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:167
#: 6924e759ecc649daa02b5a6e14481999
msgid "In order to re-enable the device in dom0, either:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:169
#: 34c68bef9e3548d79f1ed381daa6ed1c
msgid "Reboot the physical machine. (Best practice)"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:171
#: 3881cf7848294f1a82e6743d505848ed
msgid "or"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:173
#: 7287a9fe0a1e455da12a86a7e48a55dd
msgid "Go to the sysfs (``/sys/bus/pci``), find the right device, detach it from the pciback driver, and attach it back to the original driver. Replace ``<BDF>`` with your full device, for example ``0000:00:1c.2``:"
msgstr ""

#: ../../../_doc/user/how-to-guides/how-to-use-pci-devices.rst:185
#: 31e2b4d45e4e46cfb53c1f3b26a783ff
msgid "It is **strongly discouraged to reattach PCI devices to dom0**, especially if they don’t support resetting!"
msgstr ""
